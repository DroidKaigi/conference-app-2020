#!/usr/bin/env bash

set -o pipefail
set -eu

### FUNCTIONS

_md5() {
  if type md5sum >/dev/null 2>&1; then
    command md5sum
  else
    command md5
  fi
}

mkhash() {
  for_buildSrc() {
    local path=
    while read path; do
      _md5 $path
    done < <(find buildSrc -type f | sort)
  }

  for_gradle_files() {
    local path=
    while read path; do
      _md5 $path
    done < <(find . -name "build.gradle" | sort)
  }

  for_gradle_kts_files() {
    local path=
    while read path; do
      _md5 $path
    done < <(find . -name "build.gradle.kts" | sort)
  }

  for_buildSrc
  for_gradle_files
  for_gradle_kts_files
}

### FUNCTIONS: END

mkhash